let $have_plugin = `SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_STATUS='ACTIVE' AND PLUGIN_NAME = 'THREAD_POOL_STATS'`;
if(!$have_plugin)
{
  --skip Need thread_pool_stats plugin
}
DESC INFORMATION_SCHEMA.THREAD_POOL_STATS;
SELECT SUM(THREAD_CREATIONS) > 0 FROM INFORMATION_SCHEMA.THREAD_POOL_STATS;
SELECT SUM(DEQUEUES_BY_LISTENER+DEQUEUES_BY_WORKER) > 0 FROM INFORMATION_SCHEMA.THREAD_POOL_STATS;
SELECT SUM(POLLS_BY_LISTENER+POLLS_BY_WORKER) > 0 FROM INFORMATION_SCHEMA.THREAD_POOL_STATS;
FLUSH THREAD_POOL_STATS;
SELECT SUM(THREAD_CREATIONS > 0) FROM INFORMATION_SCHEMA.THREAD_POOL_STATS;
SELECT SUM(DEQUEUES_BY_LISTENER+DEQUEUES_BY_WORKER) FROM INFORMATION_SCHEMA.THREAD_POOL_STATS;
SELECT COUNT(*) FROM INFORMATION_SCHEMA.THREAD_POOL_STATS WHERE DEQUEUES_BY_LISTENER+DEQUEUES_BY_WORKER > 0;
